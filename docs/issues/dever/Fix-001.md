**[Assignee]:** @AI_Dever

**[Issue]:** #Fix-001 (삭제 기능 UI/UX 개선)

**[Feature Name]:** 스와이프 기반 삭제 선택 시스템

**[Milestone]:** Milestone 1: 기본 ToDo CRUD 기능

---

## 📖 기능 개요

### 목적
삭제 버튼을 별도로 두는 대신, 스와이프 제스처로 삭제할 할 일을 선택하고 하단에 선택 상태를 표시하는 방식으로 변경합니다. 이는 모바일 UX 패턴에 더 적합하고 UI를 더 깔끔하게 만듭니다.

### 사용자 스토리
- **As a** 사용자
- **I want** 할 일을 왼쪽으로 스와이프하여 삭제 선택할 수 있는 기능
- **So that** 더 직관적이고 모바일 친화적인 방식으로 할 일을 삭제할 수 있다

---

## 🎯 기능 요구사항

### 핵심 기능
1. 할 일을 왼쪽으로 스와이프하면 선택 상태로 전환
2. 선택된 할 일은 왼쪽으로 약간 밀려나고 '구겨진' 듯한 애니메이션 효과
3. 하단에 선택된 할 일 개수와 Delete/Cancel 버튼 표시
4. Delete 버튼 클릭 시 선택된 모든 할 일 삭제
5. Cancel 버튼 클릭 시 선택 해제

### 상세 요구사항
- 스와이프 제스처 감지 (터치 이벤트 처리)
- 선택된 할 일은 시각적으로 구분되어야 함 (왼쪽으로 밀려난 효과)
- 하단 선택 바는 선택된 할 일이 있을 때만 표시
- 여러 할 일을 연속으로 선택 가능
- 선택 해제는 Cancel 버튼 또는 오른쪽으로 스와이프로 가능

---

## 🎨 UI/UX 명세

### 화면 구성
- 각 할 일 항목을 왼쪽으로 스와이프하면 선택 상태로 전환
- 선택된 할 일은 왼쪽으로 약간 밀려나고 '구겨진' 듯한 시각적 효과
- 하단에 고정된 선택 바 표시:
  - "N Tasks selected" 텍스트 (N은 선택된 개수)
  - Delete 버튼 (빨간색/핑크색 강조)
  - Cancel 버튼

### 인터랙션
- 왼쪽 스와이프 → 할 일이 선택 상태로 전환되고 왼쪽으로 밀려남
- 선택된 할 일 다시 스와이프 → 선택 해제
- 하단 Delete 버튼 클릭 → 선택된 모든 할 일 삭제
- 하단 Cancel 버튼 클릭 → 모든 선택 해제

### 애니메이션
- 스와이프 시 할 일이 왼쪽으로 부드럽게 밀려나는 효과
- 선택된 할 일은 '구겨진' 듯한 시각적 효과 (transform: translateX + scale 조합)
- 하단 선택 바는 slide up 애니메이션으로 등장
- 삭제 시 fade out 애니메이션

### 디자인 참고
- `assets/delete.png` 파일 참조
- 선택된 할 일의 왼쪽 가장자리에 X 아이콘이나 삭제 표시가 나타날 수 있음

---

## 🔗 관련 이슈

- **관련 이슈**: Feature-001 (할 일 삭제 기능) - 기존 삭제 버튼 제거 필요
- **참고 문서**: 
  - `assets/delete.png` (디자인 참고)

---

## 📝 작업 내역

### [날짜] - 작업 시작
- 이슈 생성 및 요구사항 정의

---

## 작업 완료 내역

### 변경 사항
- `src/lib/components/PlanningMode.svelte`: 스와이프 기반 삭제 선택 시스템 구현, 기존 삭제 버튼 제거, 하단 선택 바 추가

### 주요 수정 사항
1. **스와이프 제스처 감지 로직 구현**
   - 터치 이벤트 및 마우스 이벤트 지원 (데스크톱/모바일 호환)
   - 왼쪽으로 스와이프 감지 (임계값: 50px)
   - 수직 스와이프와 구분하여 수평 스와이프만 인식
   - 편집 모드 중에는 스와이프 비활성화

2. **선택 상태 관리**
   - `selectedIds` Set을 사용하여 다중 선택 관리
   - 선택 토글 기능 (`toggleSelection`)
   - 선택 해제 기능 (`clearSelection`)
   - 선택된 할 일 개수 계산 (`getSelectedCount`)

3. **선택된 할 일의 시각적 효과**
   - 왼쪽으로 40px 이동 (`translateX(40px)`)
   - 약간 축소 효과 (`scale(0.98)`)
   - 투명도 감소 (`opacity: 0.85`)
   - 핑크 배경 강조 및 왼쪽 테두리
   - 왼쪽에 X 아이콘 표시 (펄스 애니메이션)
   - 스와이프 중 실시간 위치 업데이트

4. **하단 선택 바 구현**
   - 선택된 할 일이 있을 때만 표시 (slide up 애니메이션)
   - "N Tasks Selected" 텍스트 (N은 선택된 개수, 핑크 색상 강조)
   - [DELETE] 버튼 (핑크 네온 글로우)
   - [CANCEL] 버튼 (시안 네온 글로우)
   - 고정 위치 (하단 중앙, max-width: 400px)
   - 글래스모피즘 효과 (backdrop-filter: blur)

5. **기존 삭제 버튼 제거**
   - 각 할 일 항목의 개별 삭제 버튼 제거
   - 스와이프 기반 선택 시스템으로 완전 전환

6. **추가 디자인 개선**
   - 선택된 할 일의 X 아이콘에 펄스 애니메이션 적용
   - 스와이프 중 부드러운 전환 효과 (cubic-bezier)
   - 선택 바 버튼 호버 효과 (크기 확대 + 글로우 강화)
   - 다크 모드 + 네온 테마 완전 유지

### 수정 사항 (사용자 피드백 반영)
1. **스와이프 감지 로직 개선**
   - 50px 이상 스와이프 시에도 정상 동작하도록 수정
   - 오른쪽 스와이프 감지 추가 (선택 해제용)
   - 임계값을 30px로 감소하여 더 민감하게 반응

2. **선택 상태 관리 수정**
   - 왼쪽 스와이프 → 예비 삭제 상태로 선택
   - 오른쪽 스와이프 → 예비 삭제 상태 해제
   - `toggleSelection` 함수 제거, 명확한 선택/해제 로직으로 변경

3. **시각적 효과 수정**
   - 선택된 할 일: `translateX(-40px)`로 왼쪽 이동
   - X 아이콘을 오른쪽에 배치 (`right: -35px`)
   - 오른쪽 테두리 강조 (`border-right`)

4. **선택 바 텍스트 및 노출 문제 해결**
   - [DELETE] → Delete로 변경
   - [CANCEL] → Cancel로 변경
   - `+page.svelte`의 `overflow: hidden` → `overflow: visible`로 변경하여 선택 바 노출 문제 해결
   - `text-transform: uppercase` 제거

5. **구겨진 느낌 CSS 클래스 추가**
   - `.crushed` 클래스 추가 (스와이프 30px 이상일 때 적용)
   - 스와이프 정도에 따라 동적으로 계산:
     - `scaleY`: 1 → 0.9 (최대 10% 축소)
     - `scaleX`: 1 → 0.95 (최대 5% 축소)
     - `skewX`: 스와이프 정도에 비례하여 최대 ±3deg
   - 홀수/짝수 항목이 번갈아가며 다른 방향으로 구겨짐
   - `brightness(0.85) contrast(1.1)` 필터 적용
   - JavaScript로 실시간 계산하여 style 속성에 직접 적용

### 테스트 결과
- ✅ 왼쪽 스와이프로 할 일 선택 확인 (50px 이상도 정상 동작)
- ✅ 오른쪽 스와이프로 선택 해제 확인
- ✅ 선택된 할 일이 왼쪽으로 밀려나고 구겨진 효과 확인
- ✅ 스와이프 정도에 따라 구겨지는 정도가 달라지는지 확인
- ✅ 여러 할 일 연속 선택 가능 확인
- ✅ 하단 선택 바에 선택된 개수 정확히 표시 확인
- ✅ Delete 버튼으로 선택된 모든 할 일 삭제 확인
- ✅ Cancel 버튼으로 선택 해제 확인
- ✅ 선택된 할 일 오른쪽 스와이프하여 선택 해제 확인
- ✅ 편집 모드 중 스와이프 비활성화 확인
- ✅ 데스크톱에서 마우스 드래그로도 작동 확인
- ✅ 다크 모드 + 네온 테마 유지 확인
- ✅ 애니메이션 및 전환 효과 부드럽게 작동 확인
- ✅ 선택 바 정상 노출 확인

### 코드 변경 내역
- **추가된 코드**:
  - 스와이프 제스처 상태 변수 (`selectedIds`, `swipeStartX`, `swipeStartY`, `swipeCurrentX`, `swipeCurrentY`, `isSwiping`, `swipingId`)
  - 스와이프 이벤트 핸들러 (`handleTouchStart`, `handleTouchMove`, `handleTouchEnd`, `handleMouseDown`, `handleMouseMove`, `handleMouseUp`)
  - 선택 관리 함수 (`clearSelection`, `deleteSelected`, `getSelectedCount`, `isSelected`)
  - 선택 바 UI (`.selection-bar`, `.selection-info`, `.selection-actions`)
  - 선택된 할 일 시각적 효과 (`.selected`, `.delete-indicator`, `.swiping`, `.crushed`)
  - 선택 바 스타일 (핑크/시안 네온 글로우)
  - 구겨진 효과 CSS 클래스 (`.crushed`)
  - `planning-screen-wrapper` 컨테이너 추가
- **제거된 코드**:
  - 개별 삭제 버튼 (`.delete-btn` 및 관련 스타일)
  - `handleDeleteTask` 함수 (단일 삭제용, 다중 삭제로 대체)
  - `toggleSelection` 함수 (명확한 선택/해제 로직으로 대체)
- **수정된 코드**:
  - `li` 요소에 스와이프 이벤트 및 선택 상태 클래스 추가
  - `slide` transition import 추가
  - 스와이프 감지 로직: 오른쪽 스와이프 감지 추가, 임계값 30px로 조정
  - 선택 상태 관리: 왼쪽=선택, 오른쪽=해제로 명확히 구분
  - 시각적 효과: `translateX(-40px)`, X 아이콘 오른쪽 배치
  - 선택 바 텍스트: Delete, Cancel로 변경
  - `+page.svelte`: `overflow: visible`로 변경하여 선택 바 노출 문제 해결
  - 구겨진 효과: JavaScript로 실시간 계산하여 style 속성에 적용

---

**작성일**: 2024년  
**마지막 업데이트**: 2024년 12월 1일
