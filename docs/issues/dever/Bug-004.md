**[Assignee]:** @AI_Dever

**[Issue]:** #Bug-004 (스와이프 제스처가 드래그앤드롭으로 인식되는 버그)

**[Feature Name]:** 스와이프와 드래그앤드롭 제스처 충돌 해결

**[Milestone]:** Milestone 1: Planning Mode 기본 구현

---

## 📖 버그 개요

### 문제
삭제를 위해 Task를 왼쪽으로 스와이프할 때, 스와이프 제스처가 드래그앤드롭으로 인식되어 Task의 순서가 의도치 않게 변경됩니다.

### 재현 방법
1. Task를 왼쪽으로 스와이프하여 삭제 선택 모드 진입 시도
2. 스와이프 중 드래그앤드롭이 동시에 활성화됨
3. Task의 순서가 의도치 않게 변경됨

### 예상 동작
- 스와이프 제스처(수평 이동)와 드래그앤드롭 제스처(수직 이동)가 명확히 구분되어야 함
- 수평 스와이프 시에는 드래그앤드롭이 비활성화되어야 함
- 수직 드래그 시에만 드래그앤드롭이 활성화되어야 함

---

## 🎯 버그 원인 분석

### 현재 코드 동작
- `handleTouchStart`, `handleTouchMove`에서 스와이프 감지
- `dndzone`이 동시에 활성화되어 스와이프 중에도 드래그앤드롭이 작동
- 스와이프와 드래그 제스처를 구분하는 로직이 부족

### 문제 위치
- `src/lib/components/PlanningMode.svelte`의 스와이프 제스처 핸들러
- `dndzone` 디렉티브와 스와이프 이벤트 핸들러의 충돌
- 제스처 방향 감지 로직 부족

---

## 🔧 해결 방안

### 방법 1: 제스처 방향 감지로 드래그앤드롭 비활성화
- 스와이프 시작 시 방향 감지 (수평 vs 수직)
- 수평 스와이프 감지 시 `dndzone`의 `dragDisabled`를 동적으로 `true`로 설정
- 스와이프 종료 시 `dragDisabled`를 다시 `false`로 복원

### 방법 2: 스와이프 중 드래그 이벤트 차단
- `handleTouchMove`에서 수평 스와이프 감지 시 `event.preventDefault()` 및 `event.stopPropagation()` 호출
- 드래그앤드롭 라이브러리 이벤트 전파 차단

### 방법 3: 제스처 우선순위 설정
- 스와이프 임계값(10px)과 드래그 임계값을 다르게 설정
- 수평 이동이 수직 이동보다 먼저 감지되면 드래그앤드롭 비활성화
- 수직 이동이 수평 이동보다 먼저 감지되면 스와이프 비활성화

---

## 🎨 UI/UX 명세

### 수정 후 동작
- **수평 스와이프 (왼쪽/오른쪽)**: 삭제 선택 모드만 활성화, 드래그앤드롭 비활성화
- **수직 드래그 (위/아래)**: 드래그앤드롭만 활성화, 스와이프 비활성화
- **대각선 이동**: 초기 방향 감지로 결정 (수평 우선 또는 수직 우선)

### 제스처 구분 기준
- 수평 이동이 수직 이동보다 10px 이상 크면 → 스와이프로 인식
- 수직 이동이 수평 이동보다 10px 이상 크면 → 드래그로 인식
- 스와이프 중에는 드래그앤드롭 완전 비활성화

---

## 📝 작업 내역

### [날짜] - 작업 시작
- 버그 이슈 생성 및 원인 분석

---

**참고 문서**:
- `docs/issues/dever/Fix-001[Complete].md` - 스와이프 제스처 구현
- `docs/issues/dever/Feature-004[Complete].md` - 드래그앤드롭 구현
- `src/lib/components/PlanningMode.svelte` - 문제 발생 위치

**작성일**: 2024년  
**마지막 업데이트**: 2024년
